<!DOCTYPE html>
<html>
<head>
	<title></title>
   <meta charset="utf-8">
   <script type="text/javascript" src="utils/webgl-utils.js"></script>
   <script type="text/javascript" src="utils/webgl-lessons-ui.js"></script>
   <style type="text/css">
      canvas{
         width: 600px;
         height: 400px;
         border:1px solid #ccc;
         /*background: red;*/
      }
   </style>
</head>
<body>
	<div>
		<canvas id="c">
			
		</canvas>
	</div>
	<script id="vertex-shader" type="notjs">
      attribute vec2 a_position;
      uniform vec2 u_resolution;
      
      //定义一个可变量，给片段着色器传值
      varying vec4 v_color; 
		  void main(){
      vec2 zeroToOne=a_position/u_resolution;

      vec2 zeroToTwo=zeroToOne * 2.0;
      vec2 clipSpace=zeroToTwo - 1.0;

		  gl_Position=vec4(clipSpace*vec2(1,-1),0,1);
	}
	</script>
	<script id="fragment-shader" type="x-shader/x-fragment">
		precision mediump float;
		void main(){
     gl_FragColor = vec4(0.7,0.5,0, 1.0);
	}
	</script>
</body>
<script>
   var canvas=document.getElementById("c");
   canvas.width=1200;
   canvas.height=800;
   main();
   function main(){
      var image=new Image();
      image.src="img/002.jpg";
      image.onload=function(){
         render(image);
      }
   }

   function render(image){
      var gl=canvas.getContext("webgl");
      var program = webglUtils.createProgramFromScripts(
  gl, ["vertex-shader", "fragment-shader"]);

      var positionLocation=gl.getAttribLocation(program,"a_position");

      var positionBuffer=gl.createBuffer();
      gl.bindBuffer(gl.ARRAY_BUFFER,positionBuffer);

      setRectangle(gl,20,30,200,200);

      var resolutionLocation=gl.getUniformLocation(program,"u_resolution");

      
   }

   function drawScene(gl,program){
      webglUtils.resizeCanvasToDisplaySize(gl.canvas);
      gl.viewport(0,0,gl.canvas.width,gl.canvas.height);

      gl.clearColor(0,0,0,0);
      gl.clear(gl.COLOR_BUFFER_BIT);

      gl.useProgram(program);
      gl.enableVertexAttribArray(positionLocation);
      gl.bindBuffer(gl.ARRAY_BUFFER,positionBuffer);

      var size=2;
      var type=gl.FLOAT;
      var normalize=false;
      var stride=0;
      var offset=0;
      gl.vertexAttribPointer(positionLocation,size,type,normalize,stride,offset);

      gl.uniform2f(resolutionLocation,gl.canvas.width,gl.canvas.height);

      var primitiveType=gl.TRIANGLES;
      var offset=0;
      var count=6;
      gl.drawArrays(primitiveType,offset,count);
   }

   function setRectangle(gl,x,y,width,height){
      var x1=x;
      var x2=x+width;
      var y1=y;
      var y2=y+height;
      gl.bufferData(gl.ARRAY_BUFFER,new Float32Array([
        x1, y1,
        x2, y1,
        x1, y2,
        x1, y2,
        x2, y1,
        x2, y2,
         ]),gl.STATIC_DRAW);
   }
   
   
</script>

</html>